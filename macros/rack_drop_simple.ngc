o<rack_drop_simple> sub
    ; Check input
    #<post_x> = #1
    #<post_y> = #2
    #<post_z> = #3

    #<z_pre_pickup> = [#<post_z> + #<_ini[rack_tc]z_pre_pickup>]
    #<z_drop> = [#<post_z> + #<_ini[rack_tc]z_drop>]
    #<z_post_drop> = [#<post_z> + 20]

    ;(debug, z_pre_pickup: #<z_pre_pickup>)
    g53 g0 Z #<_ini[rack_tc]z_safe>
    ;g53 g0 X #<_ini[rack_tc]x_safe> Y #<_ini[rack_tc]y_safe>

    g53 g0 Y #<post_y>
    g53 g0 X #<post_x> 
    g53 g0 Z #<_ini[rack_tc]z_spindle_safe>


    ; Drop
    ;g53 g1 Z #<z_drop> F600
    g53 g0 Z #<z_drop>

    o<spindle_tool_drop> call [#<z_drop>] [#<z_post_drop>]
    
    ;M64 P #<_ini[pins]spindle_release>
    ;M64 P #<_ini[pins]spindle_clean> 
    ;g53 g1 Z #<z_pre_pickup> F600
    ;G4 P0.5
    ;g53 g0 Z #<_ini[rack_tc]z_spindle_safe>
    ;M65 P #<_ini[pins]spindle_release>
    ;M65 P #<_ini[pins]spindle_clean> 
    g53 g0 Z #<_ini[rack_tc]z_safe>
    

; succeed by returning a positive value
o<rack_drop_simple> endsub [1]
M2
